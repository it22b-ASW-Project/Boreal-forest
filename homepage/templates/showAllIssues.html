<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Boreal Forest</title>
</head>

<body>
  <style>
    .colorDot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
    }
  </style>

  <div>
    <h1>Boreal forest</h1>
  </div>
  <form action="new/" method="get">
    <button type="submit">+ NEW ISSUE</button>
  </form>

  <br>

  <button type="button" onclick="document.getElementById('bulkForm').style.display = 'block';">Bulk Insert</button>

  <div id="bulkForm" style="display:none;">
    <br>
    <form method="POST">
      {% csrf_token %}
      {{ bulkForm }}
      <button type="submit">Crear Issues</button> <button onclick="document.getElementById('bulkForm').style.display = 'none';">Cerrar</button> 
    </form>
  </div>

  <br><br>
  <form method="GET" class="filter-form">

    <div>
      <label for="id_q"></label>
      {{ filter.form.q }}

      <button type="submit">Buscar</button>
    </div>

    <br>
    <div>
      <label for="id_priority">Prioridad:</label>
      {{ filter.form.priority }}

      <label for="id_type">Type:</label>
      {{ filter.form.type }}

      <label for="id_severity">Severity:</label>
      {{ filter.form.severity }}

      <label for="id_status">State:</label>
      {{ filter.form.status }}

      <label for="created_by">Created_by:</label>
      {{ filter.form.created_by }}

      <label for="assigned">Assigned_to:</label>
      {{ filter.form.assigned}}

    </div>

  </form>

  <!-- Font Awesome -->
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"-->

  {% for issue in filter.qs %}
  <div>
    <p><b> #{{issue.id}} <a href="/issue/{{issue.id}}">{{issue.subject}}</a>
        {% if issue.deadline %} ‚è∞{% endif %}
      </b></p>
    <span class="colorDot" style="background-color: {{ issue.priority.color }}">
    </span>
    <span class="colorDot" style="background-color: {{issue.type.color}}">
    </span>
    <span class="colorDot" style="background-color: {{issue.severity.color}}">
    </span>
    <p style="color: {{issue.status.color}}">{{issue.status.name}}</p>
    <p><strong>Last Modified:</strong> {{ issue.modified_at|date:"d/m/Y H:i" }}</p>
    <br>
  </div>
  {% empty %}
  <p>No hay issues registrados.</p>
  {% endfor %}
  <div>
    <form action="/settings/" method="get">
      <button type="submit">SETTINGS</button>
    </form>
    <button onclick="location.href='{% url 'user_profile' user.id %}'">View Profile</button>
  </div>
</body>

</html>